{"version":3,"file":"1908fece.js","sources":["src/index.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst container = document.getElementById(\"content\");\nconst time = document.getElementById(\"time\");\nconst date = document.getElementById(\"date\");\nconst photographer = document.getElementById(\"photographer\");\nconst attribution = document.getElementById(\"attribution\");\nlet topSitesContainer = document.getElementById(\"topSitesCenter\");\nconst settingsButton = document.getElementById(\"settings-button\");\nconst versionElement = document.getElementById(\"nebula-version\");\nconst hourModeSwitch = document.getElementById(\"hour-mode-switch\");\nconst topSitesSwitch = document.getElementById(\"top-sites-switch\");\nconst topSitesCenterPositionSwitch = document.getElementById(\"top-sites-center-position-switch\");\nconst newBackgroundButton = document.getElementById(\"new-background-button\");\nconst newBackgroundButtonIcon = document.getElementById(\"new-background-button-icon\");\n// Please don't use this\nconst proxyUrl = \"https://nebula-unsplash-proxy.hkamran-workers.workers.dev\";\nconst NEBULA_VERSION = \"__NEBULA_VERSION__\";\nconst SCREENSHOT_MODE = false;\nvar Browsers;\n(function (Browsers) {\n    Browsers[Browsers[\"Gecko\"] = 0] = \"Gecko\";\n    Browsers[Browsers[\"WebKit\"] = 1] = \"WebKit\";\n    Browsers[Browsers[\"MS\"] = 2] = \"MS\";\n})(Browsers || (Browsers = {}));\n// Initialization\nif (container) {\n    const lastUpdated = browser.storage.local.get(\"lastUpdated\");\n    if (versionElement) {\n        versionElement.textContent = NEBULA_VERSION;\n    }\n    if (getBrowser() == Browsers.WebKit) {\n        let icon = document.createElement(\"link\");\n        icon.rel = \"icon\";\n        icon.href = \"/assets/icons/logo-masked48.png\";\n        let shortcutIcon = document.createElement(\"link\");\n        shortcutIcon.rel = \"shortcut icon\";\n        shortcutIcon.href = \"/assets/icons/logo-masked48.png\";\n        document.head.appendChild(icon);\n        document.head.appendChild(shortcutIcon);\n    }\n    if (!SCREENSHOT_MODE) {\n        lastUpdated.then(({ lastUpdated }) => {\n            // 12 hours\n            if (new Date().getTime() - new Date(lastUpdated).getTime() >=\n                43200000) {\n                saveNewBackgroundImage();\n            }\n            const backgroundImage = browser.storage.local.get([\n                \"backgroundImage\",\n                \"photographerName\",\n                \"photographerUrl\",\n            ]);\n            backgroundImage.then((data) => {\n                if (data.backgroundImage) {\n                    container.style.backgroundImage = `url('${data.backgroundImage}')`;\n                    setAttribution({\n                        photographer: data.photographerName,\n                        photographerUrl: data.photographerUrl,\n                        imageUrl: \"\",\n                    });\n                }\n                else {\n                    saveNewBackgroundImage((dataUrl) => {\n                        container.style.backgroundImage = `url('${dataUrl}')`;\n                    });\n                }\n            }, () => console.error(\"Error occurred when setting background image\"));\n        }, () => console.error(\"Error occurred when getting last updated time\"));\n    }\n    else {\n        container.style.backgroundImage = `url('https://images.unsplash.com/photo-1528353518104-dbd48bee7bc4?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=3132&q=80')`;\n        setAttribution({\n            photographer: \"Chan Hoi\",\n            photographerUrl: \"https://unsplash.com/@jokerhoi\",\n            imageUrl: \"\",\n        });\n    }\n}\n// Initialization\nsetTimeout(() => {\n    const d = new Date();\n    if (time) {\n        time.classList.remove(\"opacity-0\");\n        if (!SCREENSHOT_MODE) {\n            getUserHour((twelveHour) => (time.textContent = getTime(twelveHour)));\n        }\n        else {\n            time.textContent = \"9:45 AM\";\n        }\n    }\n    if (date) {\n        date.classList.remove(\"opacity-0\");\n        if (!SCREENSHOT_MODE) {\n            date.textContent = d.toLocaleDateString(\"en-US\", {\n                weekday: \"long\",\n                year: \"numeric\",\n                month: \"long\",\n                day: \"numeric\",\n            });\n        }\n        else {\n            date.textContent = \"Tuesday, October 19, 2021\";\n        }\n    }\n    if (attribution) {\n        attribution.classList.remove(\"opacity-0\");\n    }\n    if (settingsButton) {\n        settingsButton.classList.remove(\"opacity-0\");\n    }\n    if (topSitesContainer) {\n        getTopSiteValue().then((topSitesValue) => topSitesToggle(topSitesValue));\n    }\n}, 300);\nif (!SCREENSHOT_MODE) {\n    // Intervals\n    // Time Interval\n    setInterval(() => {\n        if (time) {\n            getUserHour((twelveHour) => {\n                time.textContent = getTime(twelveHour);\n            });\n        }\n        // 1000 ms = 1 second\n    }, 1000);\n    // Date Interval\n    setInterval(() => {\n        if (date) {\n            const d = new Date();\n            date.textContent = d.toLocaleDateString(\"en-US\", {\n                weekday: \"long\",\n                year: \"numeric\",\n                month: \"long\",\n                day: \"numeric\",\n            });\n        }\n        const lastUpdated = browser.storage.local.get(\"lastUpdated\");\n        lastUpdated.then(({ lastUpdated }) => {\n            if (new Date().getTime() - new Date(lastUpdated).getTime() >=\n                86400000) {\n                if (container) {\n                    saveNewBackgroundImage((dataUrl) => {\n                        container.style.backgroundImage = `url('${dataUrl}')`;\n                    });\n                }\n            }\n        });\n        // 3600000 ms = 1 hour\n    }, 3600000);\n}\n// Time Mode Switcher Button, Settings Panel\nif (hourModeSwitch &&\n    topSitesSwitch &&\n    topSitesCenterPositionSwitch &&\n    newBackgroundButton &&\n    newBackgroundButtonIcon) {\n    // Initialization\n    getUserHour((twelveHour) => (hourModeSwitch.checked = !twelveHour));\n    if (topSitesContainer) {\n        topSitesCenterPositionSwitch.checked =\n            topSitesContainer.id === \"topSitesCenter\";\n    }\n    getTopSiteValue().then((topSitesValue) => (topSitesSwitch.checked = topSitesValue));\n    // Event Listeners\n    hourModeSwitch.addEventListener(\"click\", () => getUserHour((twelveHour) => {\n        browser.storage.local.set({\n            hourStatus: twelveHour ? \"24\" : \"12\",\n        });\n        if (time) {\n            time.textContent = getTime(!twelveHour);\n        }\n    }));\n    topSitesSwitch.addEventListener(\"click\", () => getTopSiteValue().then((topSitesValue) => {\n        browser.storage.local.set({ topSites: !topSitesValue });\n        topSitesToggle(!topSitesValue);\n    }));\n    topSitesCenterPositionSwitch.addEventListener(\"click\", () => {\n        toggleTopSiteContainer().then((newPosition) => (topSitesCenterPositionSwitch.checked =\n            newPosition === \"center\" ? true : false));\n        getTopSiteValue().then((topSitesValue) => {\n            if (topSitesValue) {\n                unloadTopSites();\n                loadTopSites();\n            }\n        });\n    });\n    newBackgroundButton.addEventListener(\"click\", () => {\n        newBackgroundButtonIcon.classList.add(\"animate-spin\");\n        saveNewBackgroundImage((dataUrl) => {\n            if (container) {\n                container.style.backgroundImage = `url('${dataUrl}')`;\n                newBackgroundButtonIcon.classList.remove(\"animate-spin\");\n            }\n        });\n    });\n}\nfunction getUserHour(callback) {\n    const hourStatus = browser.storage.local.get(\"hourStatus\");\n    hourStatus.then((hourData) => {\n        if (hourData.hourStatus) {\n            callback(hourData.hourStatus === \"12\");\n        }\n        else {\n            callback(true);\n        }\n    });\n}\nfunction getTopSiteContainer() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const storageResponse = yield browser.storage.local.get(\"topSitesContainer\");\n        if (storageResponse.topSitesContainer !== \"topLeft\") {\n            if (document.getElementById(\"topSitesCenter\")) {\n                topSitesContainer = document.getElementById(\"topSitesCenter\");\n            }\n        }\n        else {\n            if (document.getElementById(\"topSitesTopLeft\")) {\n                topSitesContainer = document.getElementById(\"topSitesTopLeft\");\n            }\n        }\n    });\n}\nfunction toggleTopSiteContainer() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const currentPosition = (topSitesContainer === null || topSitesContainer === void 0 ? void 0 : topSitesContainer.id) === \"topSitesCenter\" ? \"center\" : \"topLeft\";\n        let newPosition = \"\";\n        if (currentPosition !== \"topLeft\") {\n            newPosition = \"topLeft\";\n        }\n        else {\n            newPosition = \"center\";\n        }\n        browser.storage.local.set({ topSitesContainer: newPosition });\n        return newPosition;\n    });\n}\nfunction getTopSiteValue() {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield getTopSiteContainer();\n        const storageResponse = yield browser.storage.local.get(\"topSites\");\n        return storageResponse.topSites ? storageResponse.topSites === true : false;\n    });\n}\nfunction topSitesToggle(topSitesValue) {\n    if (topSitesValue) {\n        unloadTopSites();\n        loadTopSites();\n    }\n    else {\n        unloadTopSites();\n    }\n}\nfunction unloadTopSites() {\n    const topSitesCenter = document.getElementById(\"topSitesCenter\");\n    const topSitesTopLeft = document.getElementById(\"topSitesTopLeft\");\n    if (topSitesCenter && topSitesCenter.innerHTML !== \"\") {\n        topSitesCenter.textContent = \"\";\n    }\n    if (topSitesTopLeft && topSitesTopLeft.innerHTML !== \"\") {\n        topSitesTopLeft.textContent = \"\";\n    }\n}\nfunction loadTopSites() {\n    if (topSitesContainer) {\n        const linkClassNames = topSitesContainer.id === \"topSitesCenter\"\n            ? \"p-4 bg-black bg-opacity-75 rounded-lg\"\n            : \"\";\n        const imgClassNames = topSitesContainer.id === \"topSitesCenter\" ? \"w-8\" : \"w-6\";\n        const maxTopSites = topSitesContainer.id === \"topSitesCenter\" ? 20 : 5;\n        // Firefox-based Browsers\n        if (getBrowser() === Browsers.Gecko) {\n            browser.topSites\n                .get({\n                includeFavicon: true,\n                limit: maxTopSites,\n            })\n                .then((topSites) => {\n                topSites.forEach((site) => {\n                    const a = document.createElement(\"a\");\n                    a.href = site.url;\n                    a.title = site.title || \"\";\n                    a.target = \"_blank\";\n                    a.className = linkClassNames;\n                    if (site.favicon) {\n                        const img = document.createElement(\"img\");\n                        img.className = imgClassNames;\n                        img.src = site.favicon;\n                        a.appendChild(img);\n                    }\n                    if (topSitesContainer) {\n                        topSitesContainer.appendChild(a);\n                    }\n                });\n            });\n        }\n        else {\n            browser.topSites.get().then((topSites) => {\n                topSites.slice(0, maxTopSites).forEach((site) => {\n                    const a = document.createElement(\"a\");\n                    a.href = site.url;\n                    a.title = site.title || \"\";\n                    a.target = \"_blank\";\n                    a.className = linkClassNames;\n                    const img = document.createElement(\"img\");\n                    img.className = imgClassNames;\n                    getFavicon(new URL(site.url).host, (dataUrl) => (img.src = dataUrl));\n                    a.appendChild(img);\n                    if (topSitesContainer) {\n                        topSitesContainer.appendChild(a);\n                    }\n                });\n            });\n        }\n    }\n}\nfunction getFavicon(siteHost, callback) {\n    browser.storage.local.get(\"topSitesFavicons\").then((storageResponse) => {\n        if (storageResponse.topSitesFavicons &&\n            Object.keys(storageResponse.topSitesFavicons).indexOf(siteHost) !== -1) {\n            callback(storageResponse.topSitesFavicons[`${siteHost}`]);\n        }\n        else {\n            toDataURL(`https://api.faviconkit.com/${siteHost}`)\n                .then((dataUrl) => {\n                browser.storage.local.set({\n                    topSitesFavicons: Object.assign(Object.assign({}, storageResponse.topSitesFavicons), { [siteHost]: dataUrl }),\n                });\n                callback(dataUrl);\n            })\n                .catch(() => callback(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-globe'%3e%3ccircle cx='12' cy='12' r='10'%3e%3c/circle%3e%3cline x1='2' y1='12' x2='22' y2='12'%3e%3c/line%3e%3cpath d='M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z'%3e%3c/path%3e%3c/svg%3e\"));\n        }\n    }, () => toDataURL(`https://api.faviconkit.com/${siteHost}`)\n        .then((dataUrl) => {\n        browser.storage.local.set({\n            topSitesFavicons: { [siteHost]: dataUrl },\n        });\n        callback(dataUrl);\n    })\n        .catch(() => callback(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-globe'%3e%3ccircle cx='12' cy='12' r='10'%3e%3c/circle%3e%3cline x1='2' y1='12' x2='22' y2='12'%3e%3c/line%3e%3cpath d='M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z'%3e%3c/path%3e%3c/svg%3e\")));\n}\nfunction getTime(twelveHourTime) {\n    const d = new Date();\n    if (twelveHourTime) {\n        return d.toLocaleString(\"en-us\", {\n            hour: \"numeric\",\n            minute: \"numeric\",\n            hour12: true,\n        });\n    }\n    else {\n        return (d.getHours().toString() + \":\" + padNumber(d.getMinutes().toString()));\n    }\n}\nfunction saveNewBackgroundImage(callback = null) {\n    const d = new Date();\n    getUnsplashImage()\n        .then((response) => setAttribution(response))\n        .then((response) => response.imageUrl && toDataURL(response.imageUrl))\n        .then((dataUrl) => {\n        browser.storage.local.set({\n            backgroundImage: dataUrl,\n            lastUpdated: d.toISOString(),\n        });\n        if (callback) {\n            callback(dataUrl);\n        }\n    });\n}\nfunction toDataURL(imageUrl) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let blob = yield fetch(imageUrl).then((r) => r.blob());\n        let dataUrl = yield new Promise((resolve) => {\n            let reader = new FileReader();\n            reader.onload = () => resolve(reader.result);\n            reader.readAsDataURL(blob);\n        });\n        return dataUrl;\n    });\n}\nfunction setAttribution(unsplashResponse) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (photographer) {\n            photographer.href =\n                unsplashResponse.photographerUrl +\n                    \"?utm_source=nebula-new-tab&utm_medium=referral\";\n            photographer.textContent = unsplashResponse.photographer;\n        }\n        browser.storage.local.set({\n            photographerName: unsplashResponse.photographer,\n            photographerUrl: unsplashResponse.photographerUrl,\n        });\n        return unsplashResponse;\n    });\n}\nfunction padNumber(number) {\n    return Number(number < 10)\n        ? \"0\" + Number(number).toString()\n        : Number(number).toString();\n}\nfunction getUnsplashImage() {\n    return __awaiter(this, void 0, void 0, function* () {\n        const randomImage = yield fetch(`${proxyUrl}/random?collections=935518`);\n        const randomImageJson = yield randomImage.json();\n        const encodedUrl = encodeURIComponent(randomImageJson.links.download_location);\n        const downloadUrl = yield fetch(`${proxyUrl}/download?downloadUrl=${encodedUrl}`);\n        const downloadUrlJson = yield downloadUrl.json();\n        const imageUrl = downloadUrlJson.url;\n        return {\n            photographer: randomImageJson.user.name,\n            photographerUrl: randomImageJson.user.links.html,\n            imageUrl,\n        };\n    });\n}\nfunction getBrowser() {\n    // @ts-ignore\n    const browserPrefix = Object.values(window.getComputedStyle(document.documentElement, \"\"))\n        .join(\"\")\n        .match(/-(moz|webkit|ms)/)[1];\n    /*\n    `moz` - Gecko (Firefox)\n    `webkit` - WebKit (Chrome, Safari, Opera, Edge (Chromium))\n    `ms` - MS (Internet Explorer, Edge (Trident Engine))\n    */\n    switch (browserPrefix) {\n        case \"moz\":\n            return Browsers.Gecko;\n        case \"webkit\":\n            return Browsers.WebKit;\n        case \"ms\":\n            return Browsers.MS;\n        default:\n            return null;\n    }\n}\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","container","document","getElementById","time","date","photographer","attribution","topSitesContainer","settingsButton","versionElement","hourModeSwitch","topSitesSwitch","topSitesCenterPositionSwitch","newBackgroundButton","newBackgroundButtonIcon","proxyUrl","Browsers","lastUpdated","browser","storage","local","get","textContent","getBrowser","WebKit","icon","createElement","rel","href","shortcutIcon","head","appendChild","Date","getTime","saveNewBackgroundImage","data","backgroundImage","style","setAttribution","photographerName","photographerUrl","imageUrl","dataUrl","console","error","getUserHour","callback","hourData","hourStatus","getTopSiteValue","this","getTopSiteContainer","storageResponse","topSites","topSitesToggle","topSitesValue","unloadTopSites","loadTopSites","topSitesCenter","topSitesTopLeft","innerHTML","linkClassNames","id","imgClassNames","maxTopSites","Gecko","includeFavicon","limit","forEach","site","a","url","title","target","className","favicon","img","src","slice","siteHost","URL","host","topSitesFavicons","Object","keys","indexOf","toDataURL","set","assign","catch","twelveHourTime","d","toLocaleString","hour","minute","hour12","getHours","toString","number","getMinutes","Number","randomImage","fetch","randomImageJson","json","encodedUrl","encodeURIComponent","links","download_location","downloadUrl","user","name","html","getUnsplashImage","response","toISOString","blob","r","reader","FileReader","onload","readAsDataURL","unsplashResponse","values","window","getComputedStyle","documentElement","join","match","MS","setTimeout","classList","remove","twelveHour","toLocaleDateString","weekday","year","month","day","setInterval","checked","addEventListener","newPosition","toggleTopSiteContainer","add"],"mappings":"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"}